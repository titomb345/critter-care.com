---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import ServiceCard from '../components/ServiceCard.astro';
import PricingNotes from '../components/PricingNotes.astro';
import CTASection from '../components/CTASection.astro';
import { services } from '../content/services.json';
import { testimonials } from '../content/testimonials.json';

const sortedServices = [...services].sort((a, b) => a.order - b.order);

const featuredTestimonials = testimonials.filter(t => t.featured).slice(0, 3);
---

<BaseLayout title="Critter Care — Pet Sitting & Dog Walking in the South Bay">
  <Hero
    title="Trusted Pet Sitting & Dog Walking in the South Bay"
    subtitle="Loving, professional care for your furry family — serving Lawndale and the South Bay since 1999."
    showImage={true}
  >
    <div class="mt-8 flex flex-col sm:flex-row gap-3 justify-center">
      <a href="/hire-us" class="btn-primary">
        Request Care
      </a>
      <a
        href="/about"
        class="inline-flex items-center justify-center px-6 py-3 rounded-xl bg-white/80 text-heading font-semibold hover:bg-white transition-colors border border-border"
      >
        Learn About Us
      </a>
    </div>
  </Hero>

  <!-- Services Section -->
  <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <div class="text-center mb-12">
      <h2 class="font-heading text-3xl sm:text-4xl font-bold text-heading mb-3">Our Services</h2>
      <p class="text-muted max-w-xl mx-auto">Personalized care tailored to your pet's needs. All prices shown are for single-pet visits.</p>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {sortedServices.map(service => (
        <ServiceCard
          name={service.name}
          duration={service.duration}
          price={service.price}
          description={service.description}
        />
      ))}
    </div>

    <div class="text-center mt-8">
      <a
        href="/services"
        class="inline-flex items-center gap-1 text-primary-dark font-semibold hover:text-primary transition-colors"
      >
        View All Services
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>

    <!-- Pricing Notes -->
    <div class="mt-10">
      <PricingNotes notes={[
        'Additional charges apply for holidays — please contact us for a quote.',
        'Multiple pet pricing available upon request.',
        'Cancellations and refunds can be credited towards future pet sitting services. No cash refunds.',
      ]} />
    </div>
  </section>

  <!-- Testimonials Preview -->
  <section class="bg-surface-alt/30 py-16">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="font-heading text-3xl sm:text-4xl font-bold text-heading mb-3">What Pet Parents Say</h2>
        <p class="text-muted max-w-xl mx-auto">Don't just take our word for it — hear from the families we've served.</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {featuredTestimonials.map(t => (
          <div class="bg-white rounded-2xl p-6 shadow-sm border border-border/50">
            <blockquote class="text-sm text-muted leading-relaxed mb-4">
              &ldquo;{t.quote}&rdquo;
            </blockquote>
            <p class="font-heading font-bold text-heading text-sm">{t.name}</p>
          </div>
        ))}
      </div>

      <div class="text-center mt-8">
        <a
          href="/testimonials"
          class="inline-flex items-center gap-1 text-primary-dark font-semibold hover:text-primary transition-colors"
        >
          Read More Testimonials
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <CTASection
    title="Ready to Book?"
    description="Get in touch today and give your pets the loving care they deserve."
    buttonText="Request Care"
  />
</BaseLayout>
